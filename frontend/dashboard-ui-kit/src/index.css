@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent page scrolling */
html, body {
  overflow: hidden;
  height: 100%;
  position: fixed;
  width: 100%;
}

#root {
  height: 100vh;
  width: 100vw;
  overflow: hidden;
  position: fixed;
  top: 0;
  left: 0;
}

/* PDF Viewer styles */
.rpv-core__viewer {
  border: none !important;
  height: 100% !important;
}

.rpv-core__viewer-container {
  overflow: auto !important;
  height: 100% !important;
  scroll-behavior: smooth !important;
}

.rpv-default-layout__container {
  height: 100% !important;
}

.rpv-core__page-layer {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* Hide all unwanted toolbar elements */
.rpv-default-layout__toolbar {
  display: none !important;
}

.rpv-toolbar {
  display: none !important;
}

.rpv-default-layout__main {
  height: 100% !important;
}

.rpv-default-layout__body {
  height: 100% !important;
}

/* Hide sidebar completely */
.rpv-default-layout__sidebar {
  display: none !important;
}

.rpv-default-layout__container {
  display: flex !important;
  flex-direction: column !important;
  height: 100% !important;
}

/* PDF viewer styling */
.rpv-core__inner-pages {
  padding: 1rem !important;
}

.rpv-core__page-layer {
  margin-bottom: 1rem !important;
  box-shadow: none !important;
  border-radius: 4px !important;
}

/* Smooth scrolling for vertical mode */
.rpv-core__inner-pages {
  display: flex !important;
  flex-direction: column !important;
  gap: 1rem !important;
}

.rpv-core__inner-page {
  flex-shrink: 0 !important;
}

/* Prevent automatic page centering/jumping */
.rpv-core__viewer-container {
  scroll-snap-type: none !important;
}

.rpv-core__page-layer {
  scroll-snap-align: none !important;
}

/* Override any built-in scroll behavior */
.rpv-core__viewer {
  scroll-behavior: smooth !important;
}

.rpv-core__viewer * {
  scroll-behavior: inherit !important;
}

/* Prevent page jumping in vertical scroll mode */
.rpv-scroll-mode__vertical .rpv-core__page-layer {
  scroll-snap-align: none !important;
  scroll-margin: 0 !important;
}

.rpv-scroll-mode__vertical .rpv-core__viewer-container {
  scroll-snap-type: none !important;
  scroll-padding: 0 !important;
}

/* Custom selection popup */
.pdf-text-selection-popup {
  position: fixed !important;
  z-index: 9999 !important;
  background: white !important;
  border: 1px solid #ccc !important;
  border-radius: 6px !important;
  padding: 8px 12px !important;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
}

/* Dark mode support for popup */
.dark .pdf-text-selection-popup {
  background: #374151 !important;
  border-color: #4b5563 !important;
  color: white !important;
}

/* Enhanced popup styling */
.pdf-text-selection-popup {
  backdrop-filter: blur(8px) !important;
  border: 1px solid #e5e7eb !important;
}

.dark .pdf-text-selection-popup {
  border-color: #6b7280 !important;
}

/* React PDF Viewer Highlight Plugin Styles */
.rpv-highlight__target {
  border-radius: 2px !important;
  cursor: pointer !important;
  transition: background-color 0.2s ease !important;
}

/* Highlight areas */
.rpv-highlight__area {
  border-radius: 2px !important;
  pointer-events: none !important;
}

/* Text selection highlighting - ensure smooth performance */
.rpv-core__text-layer {
  pointer-events: auto !important;
  user-select: text !important;
}

.rpv-core__text-layer .rpv-core__text-layer-text {
  color: transparent !important;
  position: absolute !important;
  white-space: pre !important;
  cursor: text !important;
  transform-origin: 0% 0% !important;
}

/* Optimize selection performance */
.rpv-core__text-layer .rpv-core__text-layer-text::selection {
  background: rgba(0, 123, 255, 0.3) !important;
}

/* Ensure text selection works properly */
.rpv-core__page-layer,
.rpv-core__text-layer {
  -webkit-touch-callout: default !important;
  -webkit-user-select: text !important;
  -khtml-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
  user-select: text !important;
}

/* KaTeX overrides to prevent layout conflicts */
.katex-display {
  margin: 0.75em 0 !important;
  text-align: center !important;
}

.katex {
  font-size: 1.1em !important;
  line-height: 1.4 !important;
}

/* Improve inline math spacing */
.katex-display + p,
p + .katex-display {
  margin-top: 0.5em !important;
}

/* Allow proper math formatting but prevent layout interference */
.katex .base {
  position: relative !important;
}

.katex .sizing {
  position: relative !important;
}

.katex .supsub {
  position: relative !important;
}

/* Ensure subscripts and superscripts work correctly */
.katex .msupsub > .vlist-t {
  position: relative !important;
}

.katex .mfrac > .vlist-t {
  position: relative !important;
}

/* Fix positioning for mathematical elements */
.katex .vlist-t {
  position: relative !important;
}

.katex .vlist-r {
  position: relative !important;
}

.katex .vlist {
  position: relative !important;
}

/* Allow normal font-size for math elements */
.katex .sizing.reset-size6.size3 {
  font-size: inherit !important;
}

/* Preserve math layout */
.katex .mord,
.katex .mop,
.katex .mbin,
.katex .mrel,
.katex .mopen,
.katex .mclose,
.katex .mpunct {
  position: static !important;
}

/* Bookmark dropdown styles */
.bookmark-popup {
  z-index: 9999 !important;
}

.bookmark-popup .rpv-bookmark__container {
  background: transparent !important;
  border: none !important;
}

.bookmark-popup .rpv-bookmark__item {
  padding: 0.5rem !important;
  border-radius: 4px !important;
  margin: 2px 0 !important;
  cursor: pointer !important;
}

.bookmark-popup .rpv-bookmark__item:hover {
  background: #f3f4f6 !important;
}

.dark .bookmark-popup .rpv-bookmark__item:hover {
  background: #4b5563 !important;
}

.bookmark-popup .rpv-bookmark__title {
  color: #374151 !important;
  font-size: 0.875rem !important;
  line-height: 1.25rem !important;
}

.dark .bookmark-popup .rpv-bookmark__title {
  color: #f9fafb !important;
}

/* Custom scrollbar styles for both light and dark modes */
* {
  scrollbar-width: thin;
  scrollbar-color: #d1d5db #ffffff; /* Light mode: thumb #d1d5db, track #ffffff */
}

.dark * {
  scrollbar-color: #6b7280 #262626; /* Dark mode: thumb #6b7280, track #262626 */
}

/* Webkit scrollbar styles */
*::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

*::-webkit-scrollbar-track {
  background: #ffffff; /* Light mode track - matches bg-white */
  border-radius: 4px;
}

*::-webkit-scrollbar-thumb {
  background: #d1d5db; /* Light mode thumb - matches bg-gray-300 */
  border-radius: 4px;
  border: 1px solid #ffffff; /* Blend with track */
}

*::-webkit-scrollbar-thumb:hover {
  background: #9ca3af; /* Light mode hover - matches bg-gray-400 */
}

/* Dark mode webkit scrollbar */
.dark *::-webkit-scrollbar-track {
  background: #262626; /* Dark mode track - matches bg-neutral-800 */
  border-radius: 4px;
}

.dark *::-webkit-scrollbar-thumb {
  background: #6b7280; /* Dark mode thumb - matches bg-gray-500 */
  border-radius: 4px;
  border: 1px solid #262626; /* Blend with track */
}

.dark *::-webkit-scrollbar-thumb:hover {
  background: #9ca3af; /* Dark mode hover - matches bg-gray-400 */
}

/* Scrollbar corner */
*::-webkit-scrollbar-corner {
  background: #ffffff; /* Light mode */
}

.dark *::-webkit-scrollbar-corner {
  background: #262626; /* Dark mode */
}

 